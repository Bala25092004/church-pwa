{% extends "layout.html" %}
{% block title %}Services & Events - {{ super() }}{% endblock %}

{% block content %}
<style>
    /* Custom styles for the services and events page */
    .page-header-section {
        background-color: #eaf6ff; /* Light sky blue background */
        padding: 3rem 1.5rem; /* Added horizontal padding */
        margin-bottom: 3rem;
        border-radius: 8px;
    }
    .page-header-section h1 {
        color: #0d2c54; /* Dark blue from login */
        font-weight: 700;
    }
    .event-card {
        border: 1px solid #e0e0e0;
        border-left: 5px solid var(--color-primary); /* Sky blue accent */
        box-shadow: 0 3px 10px rgba(0,0,0,0.07);
        border-radius: 8px;
        transition: box-shadow 0.3s ease;
        background-color: #fff;
        overflow: hidden;
    }
    .event-card:hover {
        box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    }
    .service-times-card {
        background-color: #fff;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .event-date-box {
        background-color: #f0f8ff;
        border-radius: 8px;
        padding: 1rem;
        margin-right: 1.5rem;
        width: 100px;
        flex-shrink: 0;
    }
    .event-date-box .day {
        font-size: 1.8rem;
        font-weight: bold;
        color: #134074;
        line-height: 1.1;
    }
    .event-date-box .month-year, .event-date-box .time {
        font-size: 0.85rem;
        color: #6c757d;
        line-height: 1.2;
    }
    .list-group-item strong {
        color: #343a40;
    }
    .card-title {
         color: #134074;
         font-weight: 600;
    }
    .section-title { /* Added style for section titles */
        font-weight: 600;
        color: #333;
    }
</style>

<div class="container my-5">

    <div class="page-header-section text-center fade-in">
        <h1 class="display-4">Services & Events</h1>
        <p class="lead text-muted">Join us for worship, fellowship, and community events.</p>
    </div>

    <div class="card service-times-card p-4 mb-5">
        <div class="card-body">
            <h2 class="text-center mb-4 section-title"><i class="bi bi-clock-fill me-2"></i>Weekly Service Schedule</h2>

            {% if weekly_services %}
                <ul class="list-group list-group-flush text-center">
                    {% for service in weekly_services %}
                    <li class="list-group-item border-0 bg-transparent py-2">
                        <strong class="d-block fs-5">{{ service.service_name }}</strong>
                        <span class="text-muted">{{ service.timing }}</span>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                 <p class="text-center text-muted">Weekly service schedule is currently unavailable.</p>
            {% endif %}

        </div>
    </div>

    <h2 class="text-center mb-4 section-title"><i class="bi bi-calendar-event-fill me-2"></i>Upcoming Events</h2>
    <div class="row g-4"> {# This row contains all event cards #}

        {% for event in events %}
        <div class="col-md-12"> {# Each event gets its own column #}
            <div class="card event-card mb-3"> {# A card for each event #}
                <div class="card-body d-flex align-items-center p-3 p-md-4">
                    <div class="event-date-box text-center">
                         <span class="day d-block">{{ event.date.strftime('%d') }}</span>
                         <span class="month-year d-block text-uppercase">{{ event.date.strftime('%b %Y') }}</span>
                         <span class="time d-block">{{ event.date.strftime('%I:%M %p') }}</span>
                    </div>
                    <div class="flex-grow-1">
                        <h5 class="card-title mb-1">{{ event.title }}</h5>
                        {% if event.description %}
                           <p class="card-text text-muted mb-1">{{ event.description | safe }}</p>
                        {% endif %}
                        <small class="text-muted">
                            <i class="bi bi-geo-alt-fill me-1"></i>
                            {{ event.location }}
                        </small>
                    </div>
                </div> {# End card-body #}
            </div> {# End event-card #}
        </div> {# End col-md-12 #}
        {% else %}
        <div class="col-12">
            <div class="alert alert-light text-center border" role="alert"> {# Added border #}
                <p class="mb-0 text-muted">ðŸ“… No upcoming special events scheduled at this time. Please check back later!</p>
            </div>
        </div>
        {% endfor %} {# End of the events loop #}

    </div> {# End of the row containing event cards #}

</div> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

{% endblock %} {# End of the content block #}